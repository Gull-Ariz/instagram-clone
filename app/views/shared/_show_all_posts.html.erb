<% posts.each do |post|%>
  <div class='mt-5 bg-white'>
    <div class='post-meta'>
      <%= render 'shared/profile_picture', profile_picture: post.user.profile_picture%>
      <%= link_to post.user.user_name, user_path(post.user.id), class:'profile-path'%>
    </div>
    <% if policy(post).update? && policy(post).destroy?%>
      <%= link_to edit_post_path(post.id), class: 'p-2' do %>
        <%= fa_icon 'edit 2x muted'%>
      <%end%>
      <%= link_to  post_path(post.id), class: 'p-2', method: :delete, data: { confirm: 'Are you sure?' } do %>
        <%= fa_icon 'trash 2x muted'%>
      <%end%>
    <%end%>
    <div class='post-details'>
      <%= link_to post.description, post_path(post), class:'profile-path'%>
    </div>
    <% if !post.images.nil? %>
      <% post.images.each_with_index do |image, i|%>
        <div class="owl-carousel">
          <div>
            <%= cl_image_tag(image.key, class:'post-image') %>
          </div>
        </div>
      <%end%>
    <%end%>
    <p class='text-muted'><%= time_ago_in_words post.created_at %> ago</p>
    <div id='like-or-unlike-<%= post.id.to_s %>'>
      <%= render 'likes/post_likes', post: post%>
    </div>
    <div id="comment-form-post-<%= post.id.to_s %>" class='comment-form'>
      <%= render 'comments/comment_form', post: post%>
    </div>
    <div id="comment-post-<%= post.id.to_s %>" class='comments'>
      <%= render 'posts/show_comments', post: post %>
    </div>
  </div>
<%end%>
<%= paginate posts, class: 'p-2'%>
