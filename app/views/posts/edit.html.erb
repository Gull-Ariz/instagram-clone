<div class='container top-margin'>
  <% flash.each do |msg|%>
    <div class='alert alert-info'>
      <%= msg%>
    </div>
  <%end%>
  <%= form_with model: @post do |form|%>
    <% if @post.errors.any? %>
      <h2>
        <%= pluralize(@post.errors.count, 'error') %> prohibited this post from being saved:
      </h2>
        <ul>
          <% @post.errors.full_messages.each do |msg| %>
            <li><%= msg %></li>
          <% end %>
        </ul>
      </div>
    <%end%>
    <div class='form-group'>
      <%= form.label :description %><br>
      <%= form.text_field :description, class: 'form-control', required: true, minlength: "5" %>
    </div>

    <div class='form-group'>
      <%= form.label :images%>
      <%= form.file_field :images, multiple: true, accept:'image/*', id: 'images-count', class: 'form-control', data: { images_count: @post.images.count }%>
    </div>
    <div class='form-group'>
      <%= form.submit class: 'btn btn-success' %>
    </div>
  <% end%>
  <div class='cards'>
    <% @post.images.each do |image|%>
      <div class='card'>
        <%= image_tag image %>
        <%= button_to 'Delete Image', { action: 'delete_image_attachment', image_id: image.id, post_id: @post.id },
          method: :delete, data: { confirm: 'Are you sure?' }, class: 'btn btn-danger' %>
      </div>
    <%end%>
  </div>
</div>
